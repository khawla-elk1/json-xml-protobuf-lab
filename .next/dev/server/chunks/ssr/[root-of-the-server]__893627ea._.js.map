{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khawla/Desktop/TP/Comparer%20JSON%2C%20XML%20et%20Protobuf/json-xml-protobuf-lab/pages/index.js"],"sourcesContent":["import { useState } from 'react';\r\n\r\nexport default function Home() {\r\n  const [results, setResults] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleSerialize = async () => {\r\n    setLoading(true);\r\n    setResults(null);\r\n    setError(null);\r\n    \r\n    try {\r\n      // 1. Appel API pour la s√©rialisation\r\n      const response = await fetch('/api/serialize', {\r\n        method: 'POST',\r\n      });\r\n\r\n      if (!response.ok) {\r\n        // Tente de lire le message d'erreur du body si l'API le fournit\r\n        const errorText = await response.text();\r\n        throw new Error(`Erreur ${response.status} lors de la s√©rialisation : ${errorText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setResults(data);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getComparisonText = (jsonSize, protoSize) => {\r\n    if (jsonSize && protoSize) {\r\n      const difference = jsonSize - protoSize;\r\n      const percentage = ((difference / jsonSize) * 100).toFixed(2);\r\n      \r\n      if (difference > 0) {\r\n          return `Protobuf est **${difference} octets** plus petit, soit une r√©duction de **${percentage}%** par rapport √† JSON.`;\r\n      } else if (difference < 0) {\r\n          return `Protobuf est **${Math.abs(difference)} octets** plus grand que JSON.`;\r\n      } else {\r\n          return \"Protobuf et JSON ont la m√™me taille.\";\r\n      }\r\n    }\r\n    return \"Les donn√©es de taille ne sont pas disponibles pour la comparaison.\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <header>\r\n        <h1>üî¨ Labo de S√©rialisation</h1>\r\n        <p>\r\n          Ce labo compare la taille d'une liste d'employ√©s s√©rialis√©e en **JSON**, **XML** et **Protobuf** (Binaire). Les fichiers sont sauvegard√©s sur le serveur pour inspection.\r\n        </p>\r\n      </header>\r\n      \r\n      <button \r\n        onClick={handleSerialize} \r\n        disabled={loading} \r\n        className=\"primary-button\"\r\n      >\r\n        {loading ? '‚è≥ S√©rialisation en cours...' : 'üöÄ Ex√©cuter la S√©rialisation et la Sauvegarde'}\r\n      </button>\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p>üõë Erreur: {error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {results && (\r\n        <div className=\"results-panel\">\r\n          <h2>R√©sultats de la Comparaison de Taille</h2>\r\n          \r\n          {/* Table de comparaison */}\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Format</th>\r\n                <th>Taille du Fichier (Octets)</th>\r\n                <th>Lien de T√©l√©chargement</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {/* JSON Row */}\r\n              <tr className=\"json-row\">\r\n                <td>**JSON**</td>\r\n                <td>**{results.json?.size}**</td>\r\n                <td>\r\n                  <a href={`/serialized/${results.json?.fileName}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                    {results.json?.fileName}\r\n                  </a>\r\n                </td>\r\n              </tr>\r\n              {/* XML Row */}\r\n              <tr className=\"xml-row\">\r\n                <td>**XML**</td>\r\n                <td>**{results.xml?.size}**</td>\r\n                <td>\r\n                  <a href={`/serialized/${results.xml?.fileName}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                    {results.xml?.fileName}\r\n                  </a>\r\n                </td>\r\n              </tr>\r\n              {/* Protobuf Row (Highlight) */}\r\n              <tr className=\"protobuf-row\">\r\n                <td>**Protobuf (Binaire)**</td>\r\n                <td>**{results.protobuf?.size}**</td>\r\n                <td>\r\n                  <a href={`/serialized/${results.protobuf?.fileName}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                    {results.protobuf?.fileName}\r\n                  </a>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          \r\n          {/* Conclusion */}\r\n          <div className=\"conclusion-card\">\r\n            <h3>‚öñÔ∏è Conclusion Protobuf vs. JSON</h3>\r\n            <p dangerouslySetInnerHTML={{ __html: getComparisonText(results.json?.size, results.protobuf?.size) }} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Styles */}\r\n      <style jsx global>{`\r\n        body { \r\n          margin: 0; \r\n          background: #f4f7f9; \r\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n        }\r\n      `}</style>\r\n\r\n      <style jsx>{`\r\n        .container {\r\n          max-width: 900px;\r\n          margin: 40px auto;\r\n          padding: 30px;\r\n          background: #ffffff;\r\n          border-radius: 12px;\r\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\r\n        }\r\n\r\n        header h1 {\r\n          color: #333;\r\n          border-bottom: 2px solid #0070f3;\r\n          padding-bottom: 10px;\r\n          margin-top: 0;\r\n        }\r\n\r\n        header p {\r\n          color: #555;\r\n          line-height: 1.6;\r\n        }\r\n\r\n        /* --- Bouton --- */\r\n        .primary-button {\r\n          padding: 12px 25px;\r\n          font-size: 16px;\r\n          cursor: pointer;\r\n          background-color: #0070f3;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          transition: background-color 0.2s, transform 0.1s;\r\n          margin-bottom: 30px;\r\n        }\r\n\r\n        .primary-button:hover:not(:disabled) {\r\n          background-color: #005bb5;\r\n        }\r\n\r\n        .primary-button:disabled {\r\n          background-color: #a0c4f8;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        /* --- Messages d'√©tat --- */\r\n        .error-message {\r\n          color: #d93025;\r\n          background: #fde8e7;\r\n          border: 1px solid #d93025;\r\n          padding: 15px;\r\n          border-radius: 6px;\r\n          margin-top: 20px;\r\n        }\r\n        \r\n        .results-panel h2 {\r\n            color: #333;\r\n            margin-top: 30px;\r\n        }\r\n\r\n        /* --- Tableau de R√©sultats --- */\r\n        table {\r\n          width: 100%;\r\n          border-collapse: separate;\r\n          border-spacing: 0;\r\n          margin-top: 20px;\r\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n          border-radius: 8px;\r\n          overflow: hidden; /* Important pour les coins arrondis */\r\n        }\r\n\r\n        th, td {\r\n          padding: 15px;\r\n          text-align: left;\r\n        }\r\n\r\n        th {\r\n          background-color: #0070f3;\r\n          color: white;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        tr:nth-child(even) {\r\n            background-color: #f8f8f8;\r\n        }\r\n        \r\n        tr:hover {\r\n            background-color: #f0f0f0;\r\n        }\r\n\r\n        /* Ligne Protobuf mise en √©vidence */\r\n        .protobuf-row {\r\n            background-color: #e6ffe6; /* Vert clair */\r\n            font-weight: bold;\r\n        }\r\n        \r\n        .protobuf-row:hover {\r\n            background-color: #d4fcd4;\r\n        }\r\n\r\n        td a {\r\n          color: #0070f3;\r\n          text-decoration: none;\r\n          font-weight: 500;\r\n        }\r\n\r\n        td a:hover {\r\n          text-decoration: underline;\r\n        }\r\n        \r\n        /* --- Carte de Conclusion --- */\r\n        .conclusion-card {\r\n            margin-top: 40px;\r\n            padding: 20px;\r\n            background-color: #f0f8ff; /* Bleu tr√®s clair */\r\n            border-left: 5px solid #0070f3;\r\n            border-radius: 8px;\r\n        }\r\n        \r\n        .conclusion-card h3 {\r\n            color: #0070f3;\r\n            margin-top: 0;\r\n            margin-bottom: 10px;\r\n        }\r\n        \r\n        .conclusion-card p {\r\n            font-size: 1.1em;\r\n            color: #333;\r\n        }\r\n        \r\n        /* Assurer que le style de gras est appliqu√© dans le paragraphe g√©n√©r√© */\r\n        .conclusion-card p :global(strong) {\r\n            color: #005bb5;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}